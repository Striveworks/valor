
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../installation/" rel="prev"/>
<link href="../metadata_and_filtering/" rel="next"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.5.3, mkdocs-material-9.5.18" name="generator"/>
<title>Basic Usage - Valor</title>
<link href="../assets/stylesheets/main.66ac8b77.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../assets/_mkdocstrings.css" rel="stylesheet"/>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="deep-purple" data-md-color-scheme="slate" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#basic-usage">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Valor" class="md-header__button md-logo" data-md-component="logo" href=".." title="Valor">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Valor
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Basic Usage
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/striveworks/valor" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Valor" class="md-nav__button md-logo" data-md-component="logo" href=".." title="Valor">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    Valor
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/striveworks/valor" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../installation/">
<span class="md-ellipsis">
    Installation
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Basic Usage
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Basic Usage
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#using-the-python-client">
<span class="md-ellipsis">
      Using the Python client
    </span>
</a>
<nav aria-label="Using the Python client" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#import-dependencies">
<span class="md-ellipsis">
      Import dependencies
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#connect-to-the-client">
<span class="md-ellipsis">
      Connect to the Client
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pass-your-ground-truths-into-valor">
<span class="md-ellipsis">
      Pass your ground truths into Valor
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pass-your-predictions-into-valor">
<span class="md-ellipsis">
      Pass your predictions into Valor
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#run-your-evaluation-and-print-metrics">
<span class="md-ellipsis">
      Run your evaluation and print metrics
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#run-a-filtered-evaluation-and-print-metrics">
<span class="md-ellipsis">
      Run a filtered evaluation and print metrics
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#next-steps">
<span class="md-ellipsis">
      Next Steps
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://github.com/Striveworks/valor/blob/main/examples/">
<span class="md-ellipsis">
    Sample Notebooks
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../metadata_and_filtering/">
<span class="md-ellipsis">
    Metadata &amp; Filtering
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../metrics/">
<span class="md-ellipsis">
    Metrics
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../endpoints/">
<span class="md-ellipsis">
    Endpoints
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../technical_concepts/">
<span class="md-ellipsis">
    Technical Concepts
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../contributing/">
<span class="md-ellipsis">
    Contributing &amp; Development
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
<span class="md-ellipsis">
    Python Client API
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            Python Client API
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Annotation/">
<span class="md-ellipsis">
    Annotation
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Client/">
<span class="md-ellipsis">
    Client
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Dataset/">
<span class="md-ellipsis">
    Dataset
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Datum/">
<span class="md-ellipsis">
    Datum
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Evaluation/">
<span class="md-ellipsis">
    Evaluation
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Groundtruth/">
<span class="md-ellipsis">
    Groundtruth
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Label/">
<span class="md-ellipsis">
    Label
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Model/">
<span class="md-ellipsis">
    Model
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Prediction/">
<span class="md-ellipsis">
    Prediction
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Viz/">
<span class="md-ellipsis">
    Viz
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_10_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_10_11" id="__nav_10_11_label" tabindex="0">
<span class="md-ellipsis">
    Schemas
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_11_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_10_11">
<span class="md-nav__icon md-icon"></span>
            Schemas
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Schemas/Filters/">
<span class="md-ellipsis">
    Filters
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_10_11_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_10_11_2" id="__nav_10_11_2_label" tabindex="0">
<span class="md-ellipsis">
    Evaluation
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_11_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_10_11_2">
<span class="md-nav__icon md-icon"></span>
            Evaluation
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Schemas/Evaluation/EvaluationParameters/">
<span class="md-ellipsis">
    EvaluationParameters
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_10_11_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_10_11_3" id="__nav_10_11_3_label" tabindex="0">
<span class="md-ellipsis">
    Spatial
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_11_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_10_11_3">
<span class="md-nav__icon md-icon"></span>
            Spatial
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Schemas/Spatial/Box/">
<span class="md-ellipsis">
    Box
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Schemas/Spatial/LineString/">
<span class="md-ellipsis">
    LineString
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Schemas/Spatial/MultiLineString/">
<span class="md-ellipsis">
    MultiLineString
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Schemas/Spatial/MultiPoint/">
<span class="md-ellipsis">
    MultiPoint
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Schemas/Spatial/Point/">
<span class="md-ellipsis">
    Point
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Schemas/Spatial/Polygon/">
<span class="md-ellipsis">
    Polygon
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client_api/Schemas/Spatial/Raster/">
<span class="md-ellipsis">
    Raster
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#using-the-python-client">
<span class="md-ellipsis">
      Using the Python client
    </span>
</a>
<nav aria-label="Using the Python client" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#import-dependencies">
<span class="md-ellipsis">
      Import dependencies
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#connect-to-the-client">
<span class="md-ellipsis">
      Connect to the Client
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pass-your-ground-truths-into-valor">
<span class="md-ellipsis">
      Pass your ground truths into Valor
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pass-your-predictions-into-valor">
<span class="md-ellipsis">
      Pass your predictions into Valor
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#run-your-evaluation-and-print-metrics">
<span class="md-ellipsis">
      Run your evaluation and print metrics
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#run-a-filtered-evaluation-and-print-metrics">
<span class="md-ellipsis">
      Run a filtered evaluation and print metrics
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#next-steps">
<span class="md-ellipsis">
      Next Steps
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="basic-usage">Basic Usage</h1>
<p>Valor is a centralized evaluation store that makes it easy to measure, explore, and rank model performance. For an overview of what Valor is and why it's important, please refer to our <a href="../">high-level overview</a>.</p>
<p>On this page, we'll describe the basic usage of Valor. For how to install Valor, please see our <a href="../installation/">installation guide</a>.</p>
<p>There are two ways to access Valor: by leveraging our Python client (the typical way users of Valor will interact with the service), or by calling our REST endpoints directly (e.g. for integrating Valor into other services). This guide covers the former way of interacting with Valor. For the latter, please see our <a href="../endpoints/">API endpoints documentation</a>.</p>
<h2 id="using-the-python-client">Using the Python client</h2>
<p>Let's walk through a hypothetical example where we're trying to classify dogs and cats in a series of images. Note that all of the code below is pseudo-code for clarity; please see our <a href="https://github.com/Striveworks/valor/blob/main/examples/getting_started.ipynb">Getting Started</a> notebook for a working example.</p>
<h3 id="import-dependencies">Import dependencies</h3>
<p>Import basic objects directly from the client module using:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">valor</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>    <span class="n">connect</span>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>    <span class="n">Client</span><span class="p">,</span>
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>    <span class="n">Dataset</span><span class="p">,</span>
</span><span id="__span-0-5"><a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>    <span class="n">Model</span><span class="p">,</span>
</span><span id="__span-0-6"><a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a>    <span class="n">Datum</span><span class="p">,</span>
</span><span id="__span-0-7"><a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a>    <span class="n">Annotation</span><span class="p">,</span>
</span><span id="__span-0-8"><a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a>    <span class="n">GroundTruth</span><span class="p">,</span>
</span><span id="__span-0-9"><a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a>    <span class="n">Prediction</span><span class="p">,</span>
</span><span id="__span-0-10"><a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a>    <span class="n">Label</span><span class="p">,</span>
</span><span id="__span-0-11"><a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="p">)</span>
</span><span id="__span-0-12"><a href="#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="kn">from</span> <span class="nn">valor.schemas</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="__span-0-13"><a href="#__codelineno-0-13" id="__codelineno-0-13" name="__codelineno-0-13"></a>    <span class="n">Point</span><span class="p">,</span>
</span><span id="__span-0-14"><a href="#__codelineno-0-14" id="__codelineno-0-14" name="__codelineno-0-14"></a>    <span class="n">Box</span><span class="p">,</span>
</span><span id="__span-0-15"><a href="#__codelineno-0-15" id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="p">)</span>
</span><span id="__span-0-16"><a href="#__codelineno-0-16" id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="kn">from</span> <span class="nn">valor.enums</span> <span class="kn">import</span> <span class="n">TaskType</span>
</span></code></pre></div>
<h3 id="connect-to-the-client">Connect to the Client</h3>
<p>The <code>valor.Client</code> class gives an object that is used to communicate with the <code>valor</code> back end.</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="n">connect</span><span class="p">(</span><span class="s2">"http://0.0.0.0:8000"</span><span class="p">)</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
</span></code></pre></div>
<p>In the event that the host uses authentication, the argument <code>access_token</code> should also be passed to <code>Client</code>.</p>
<h3 id="pass-your-ground-truths-into-valor">Pass your ground truths into Valor</h3>
<p>First, we define our <code>Dataset</code> object using <code>Dataset.create()</code>.</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a>    <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a>    <span class="n">name</span><span class="o">=</span><span class="s2">"myDataset"</span><span class="p">,</span>
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a>    <span class="n">metadata</span><span class="o">=</span><span class="p">{</span>        <span class="c1"># optional</span>
</span><span id="__span-2-5"><a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a>        <span class="s2">"some_string"</span><span class="p">:</span> <span class="s2">"hello_world"</span><span class="p">,</span>
</span><span id="__span-2-6"><a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a>        <span class="s2">"some_number"</span><span class="p">:</span> <span class="mi">1234</span><span class="p">,</span>
</span><span id="__span-2-7"><a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a>        <span class="s2">"a_different_number"</span><span class="p">:</span> <span class="mf">1.234</span><span class="p">,</span>
</span><span id="__span-2-8"><a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a>        <span class="s2">"a_geospatial_reference"</span><span class="p">:</span> <span class="n">Point</span><span class="p">((</span><span class="mf">1.23</span><span class="p">,</span> <span class="mf">3.21</span><span class="p">)),</span>
</span><span id="__span-2-9"><a href="#__codelineno-2-9" id="__codelineno-2-9" name="__codelineno-2-9"></a>    <span class="p">},</span>
</span><span id="__span-2-10"><a href="#__codelineno-2-10" id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="p">)</span>
</span></code></pre></div>
<p>Next, we add one or more <code>GroundTruths</code> to our <code>Dataset</code>. These objects help Valor understand: "What is the correct classification for this particular image?".</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="c1"># We start with an example of what third-party annotations could look like.</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="c1"># img3.png contains a bounding box annotation with label "dog".</span>
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="c1"># img4.png contains a bounding box annotation with label "cat"</span>
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="c1"># img5.png contains no annotations</span>
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="n">groundtruth_annotations</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-3-6"><a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a>    <span class="p">{</span><span class="s2">"path"</span><span class="p">:</span> <span class="s2">"a/b/c/img3.png"</span><span class="p">,</span> <span class="s2">"annotations"</span><span class="p">:</span> <span class="p">[{</span><span class="s2">"class_label"</span><span class="p">:</span> <span class="s2">"dog"</span><span class="p">,</span> <span class="s2">"bbox"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"xmin"</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="s2">"ymin"</span><span class="p">:</span> <span class="mi">130</span><span class="p">,</span> <span class="s2">"xmax"</span><span class="p">:</span> <span class="mi">70</span><span class="p">,</span> <span class="s2">"ymax"</span><span class="p">:</span> <span class="mi">150</span><span class="p">}},</span> <span class="p">{</span><span class="s2">"class_label"</span><span class="p">:</span> <span class="s2">"person"</span><span class="p">,</span> <span class="s2">"bbox"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"xmin"</span><span class="p">:</span> <span class="mi">89</span><span class="p">,</span> <span class="s2">"ymin"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">"xmax"</span><span class="p">:</span> <span class="mi">97</span><span class="p">,</span> <span class="s2">"ymax"</span><span class="p">:</span> <span class="mi">110</span><span class="p">}}]},</span>
</span><span id="__span-3-7"><a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a>    <span class="p">{</span><span class="s2">"path"</span><span class="p">:</span> <span class="s2">"a/b/c/img4.png"</span><span class="p">,</span> <span class="s2">"annotations"</span><span class="p">:</span> <span class="p">[{</span><span class="s2">"class_label"</span><span class="p">:</span> <span class="s2">"cat"</span><span class="p">,</span> <span class="s2">"bbox"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"xmin"</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span> <span class="s2">"ymin"</span><span class="p">:</span> <span class="mi">220</span><span class="p">,</span> <span class="s2">"xmax"</span><span class="p">:</span> <span class="mi">530</span><span class="p">,</span> <span class="s2">"ymax"</span><span class="p">:</span> <span class="mi">260</span><span class="p">}}]},</span>
</span><span id="__span-3-8"><a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a>    <span class="p">{</span><span class="s2">"path"</span><span class="p">:</span> <span class="s2">"a/b/c/img5.png"</span><span class="p">,</span> <span class="s2">"annotations"</span><span class="p">:</span> <span class="p">[]}</span>
</span><span id="__span-3-9"><a href="#__codelineno-3-9" id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="p">]</span>
</span><span id="__span-3-10"><a href="#__codelineno-3-10" id="__codelineno-3-10" name="__codelineno-3-10"></a>
</span><span id="__span-3-11"><a href="#__codelineno-3-11" id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">groundtruth_annotations</span><span class="p">:</span>
</span><span id="__span-3-12"><a href="#__codelineno-3-12" id="__codelineno-3-12" name="__codelineno-3-12"></a>
</span><span id="__span-3-13"><a href="#__codelineno-3-13" id="__codelineno-3-13" name="__codelineno-3-13"></a>    <span class="c1"># each image is represented by a Valor Datum.</span>
</span><span id="__span-3-14"><a href="#__codelineno-3-14" id="__codelineno-3-14" name="__codelineno-3-14"></a>    <span class="c1"># this is used to connect ground truths and predictions when it's time for evaluation.</span>
</span><span id="__span-3-15"><a href="#__codelineno-3-15" id="__codelineno-3-15" name="__codelineno-3-15"></a>    <span class="n">datum</span> <span class="o">=</span> <span class="n">Datum</span><span class="p">(</span>
</span><span id="__span-3-16"><a href="#__codelineno-3-16" id="__codelineno-3-16" name="__codelineno-3-16"></a>        <span class="n">uid</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="n">image</span><span class="p">[</span><span class="s2">"path"</span><span class="p">])</span><span class="o">.</span><span class="n">stem</span><span class="p">,</span> <span class="c1"># strip the filename for use as Datum UID.</span>
</span><span id="__span-3-17"><a href="#__codelineno-3-17" id="__codelineno-3-17" name="__codelineno-3-17"></a>        <span class="n">metadata</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-3-18"><a href="#__codelineno-3-18" id="__codelineno-3-18" name="__codelineno-3-18"></a>            <span class="s2">"path"</span><span class="p">:</span> <span class="n">image</span><span class="p">[</span><span class="s2">"path"</span><span class="p">],</span>  <span class="c1"># store the path in metadata</span>
</span><span id="__span-3-19"><a href="#__codelineno-3-19" id="__codelineno-3-19" name="__codelineno-3-19"></a>        <span class="p">}</span>
</span><span id="__span-3-20"><a href="#__codelineno-3-20" id="__codelineno-3-20" name="__codelineno-3-20"></a>    <span class="p">)</span>
</span><span id="__span-3-21"><a href="#__codelineno-3-21" id="__codelineno-3-21" name="__codelineno-3-21"></a>
</span><span id="__span-3-22"><a href="#__codelineno-3-22" id="__codelineno-3-22" name="__codelineno-3-22"></a>    <span class="c1"># a Valor Annotation consists of a task_type, labels, and, optionally, a geometry.</span>
</span><span id="__span-3-23"><a href="#__codelineno-3-23" id="__codelineno-3-23" name="__codelineno-3-23"></a>    <span class="n">annotations</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-3-24"><a href="#__codelineno-3-24" id="__codelineno-3-24" name="__codelineno-3-24"></a>        <span class="n">Annotation</span><span class="p">(</span>
</span><span id="__span-3-25"><a href="#__codelineno-3-25" id="__codelineno-3-25" name="__codelineno-3-25"></a>            <span class="n">task_type</span><span class="o">=</span><span class="n">TaskType</span><span class="o">.</span><span class="n">OBJECT_DETECTION</span><span class="p">,</span>
</span><span id="__span-3-26"><a href="#__codelineno-3-26" id="__codelineno-3-26" name="__codelineno-3-26"></a>            <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="n">Label</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">"class_label"</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">annotation</span><span class="p">[</span><span class="s2">"class_label"</span><span class="p">])],</span>
</span><span id="__span-3-27"><a href="#__codelineno-3-27" id="__codelineno-3-27" name="__codelineno-3-27"></a>            <span class="n">bounding_box</span><span class="o">=</span><span class="n">Box</span><span class="o">.</span><span class="n">from_extrema</span><span class="p">(</span>
</span><span id="__span-3-28"><a href="#__codelineno-3-28" id="__codelineno-3-28" name="__codelineno-3-28"></a>                <span class="n">xmin</span><span class="o">=</span><span class="n">annotation</span><span class="p">[</span><span class="s2">"bbox"</span><span class="p">][</span><span class="s2">"xmin"</span><span class="p">],</span>
</span><span id="__span-3-29"><a href="#__codelineno-3-29" id="__codelineno-3-29" name="__codelineno-3-29"></a>                <span class="n">xmax</span><span class="o">=</span><span class="n">annotation</span><span class="p">[</span><span class="s2">"bbox"</span><span class="p">][</span><span class="s2">"xmax"</span><span class="p">],</span>
</span><span id="__span-3-30"><a href="#__codelineno-3-30" id="__codelineno-3-30" name="__codelineno-3-30"></a>                <span class="n">ymin</span><span class="o">=</span><span class="n">annotation</span><span class="p">[</span><span class="s2">"bbox"</span><span class="p">][</span><span class="s2">"ymin"</span><span class="p">],</span>
</span><span id="__span-3-31"><a href="#__codelineno-3-31" id="__codelineno-3-31" name="__codelineno-3-31"></a>                <span class="n">ymax</span><span class="o">=</span><span class="n">annotation</span><span class="p">[</span><span class="s2">"bbox"</span><span class="p">][</span><span class="s2">"ymax"</span><span class="p">],</span>
</span><span id="__span-3-32"><a href="#__codelineno-3-32" id="__codelineno-3-32" name="__codelineno-3-32"></a>            <span class="p">)</span>
</span><span id="__span-3-33"><a href="#__codelineno-3-33" id="__codelineno-3-33" name="__codelineno-3-33"></a>        <span class="p">)</span>
</span><span id="__span-3-34"><a href="#__codelineno-3-34" id="__codelineno-3-34" name="__codelineno-3-34"></a>        <span class="k">for</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="n">image</span><span class="p">[</span><span class="s2">"annotations"</span><span class="p">]</span>
</span><span id="__span-3-35"><a href="#__codelineno-3-35" id="__codelineno-3-35" name="__codelineno-3-35"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="__span-3-36"><a href="#__codelineno-3-36" id="__codelineno-3-36" name="__codelineno-3-36"></a>    <span class="p">]</span>
</span><span id="__span-3-37"><a href="#__codelineno-3-37" id="__codelineno-3-37" name="__codelineno-3-37"></a>
</span><span id="__span-3-38"><a href="#__codelineno-3-38" id="__codelineno-3-38" name="__codelineno-3-38"></a>    <span class="c1"># the datum and annotations we created are then used to form a GroundTruth.</span>
</span><span id="__span-3-39"><a href="#__codelineno-3-39" id="__codelineno-3-39" name="__codelineno-3-39"></a>    <span class="n">groundtruth</span> <span class="o">=</span> <span class="n">GroundTruth</span><span class="p">(</span>
</span><span id="__span-3-40"><a href="#__codelineno-3-40" id="__codelineno-3-40" name="__codelineno-3-40"></a>        <span class="n">datum</span><span class="o">=</span><span class="n">datum</span><span class="p">,</span>
</span><span id="__span-3-41"><a href="#__codelineno-3-41" id="__codelineno-3-41" name="__codelineno-3-41"></a>        <span class="n">annotations</span><span class="o">=</span><span class="n">annotations</span><span class="p">,</span>
</span><span id="__span-3-42"><a href="#__codelineno-3-42" id="__codelineno-3-42" name="__codelineno-3-42"></a>    <span class="p">)</span>
</span><span id="__span-3-43"><a href="#__codelineno-3-43" id="__codelineno-3-43" name="__codelineno-3-43"></a>
</span><span id="__span-3-44"><a href="#__codelineno-3-44" id="__codelineno-3-44" name="__codelineno-3-44"></a>    <span class="c1"># add it to your dataset</span>
</span><span id="__span-3-45"><a href="#__codelineno-3-45" id="__codelineno-3-45" name="__codelineno-3-45"></a>    <span class="n">dataset</span><span class="o">.</span><span class="n">add_groundtruth</span><span class="p">(</span><span class="n">groundtruth</span><span class="p">)</span>
</span><span id="__span-3-46"><a href="#__codelineno-3-46" id="__codelineno-3-46" name="__codelineno-3-46"></a>
</span><span id="__span-3-47"><a href="#__codelineno-3-47" id="__codelineno-3-47" name="__codelineno-3-47"></a><span class="c1"># now that we've added all our ground truths, we can finalize our dataset for evaluation</span>
</span><span id="__span-3-48"><a href="#__codelineno-3-48" id="__codelineno-3-48" name="__codelineno-3-48"></a><span class="n">dataset</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span>
</span></code></pre></div>
<h3 id="pass-your-predictions-into-valor">Pass your predictions into Valor</h3>
<p>Now that we've passed several images of dogs into Valor, we need to pass in model predictions before we can evaluate whether those predictions were correct or not. To accomplish this task, we start by defining our <code>Model</code>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="c1"># create model</span>
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span>
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a>    <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a>    <span class="n">name</span><span class="o">=</span><span class="s2">"myModel"</span><span class="p">,</span>
</span><span id="__span-4-5"><a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a>    <span class="n">metadata</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-4-6"><a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a>        <span class="s2">"foo"</span><span class="p">:</span> <span class="s2">"bar"</span><span class="p">,</span>
</span><span id="__span-4-7"><a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a>        <span class="s2">"some_number"</span><span class="p">:</span> <span class="mi">4321</span><span class="p">,</span>
</span><span id="__span-4-8"><a href="#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a>    <span class="p">},</span>
</span><span id="__span-4-9"><a href="#__codelineno-4-9" id="__codelineno-4-9" name="__codelineno-4-9"></a>    <span class="n">geospatial</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-4-10"><a href="#__codelineno-4-10" id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="p">)</span>
</span></code></pre></div>
<p>Next, we tell Valor what our model predicted for each image by attaching <code>Predictions</code> to our <code>Model</code>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="k">def</span> <span class="nf">create_prediction_from_object_detection_dict</span><span class="p">(</span><span class="n">element</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">datums_by_uid</span><span class="p">:</span><span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Prediction</span><span class="p">:</span>
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a>
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a>    <span class="c1"># get datum from dataset using filename</span>
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a>    <span class="n">uid</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s2">"path"</span><span class="p">])</span><span class="o">.</span><span class="n">stem</span>
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a>    <span class="n">groundtruth</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_groundtruth</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a>
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a>    <span class="c1"># create Annotations</span>
</span><span id="__span-5-8"><a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a>    <span class="n">annotations</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-5-9"><a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a>        <span class="n">Annotation</span><span class="p">(</span>
</span><span id="__span-5-10"><a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a>            <span class="n">task_type</span><span class="o">=</span><span class="n">TaskType</span><span class="o">.</span><span class="n">OBJECT_DETECTION</span><span class="p">,</span>
</span><span id="__span-5-11"><a href="#__codelineno-5-11" id="__codelineno-5-11" name="__codelineno-5-11"></a>            <span class="n">labels</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-5-12"><a href="#__codelineno-5-12" id="__codelineno-5-12" name="__codelineno-5-12"></a>                <span class="n">Label</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">"class_label"</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">label</span><span class="p">[</span><span class="s2">"class_label"</span><span class="p">],</span> <span class="n">score</span><span class="o">=</span><span class="n">label</span><span class="p">[</span><span class="s2">"score"</span><span class="p">])</span>
</span><span id="__span-5-13"><a href="#__codelineno-5-13" id="__codelineno-5-13" name="__codelineno-5-13"></a>                <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">annotation</span><span class="p">[</span><span class="s2">"labels"</span><span class="p">]</span>
</span><span id="__span-5-14"><a href="#__codelineno-5-14" id="__codelineno-5-14" name="__codelineno-5-14"></a>            <span class="p">],</span>
</span><span id="__span-5-15"><a href="#__codelineno-5-15" id="__codelineno-5-15" name="__codelineno-5-15"></a>            <span class="n">bounding_box</span><span class="o">=</span><span class="n">Box</span><span class="o">.</span><span class="n">from_extrema</span><span class="p">(</span>
</span><span id="__span-5-16"><a href="#__codelineno-5-16" id="__codelineno-5-16" name="__codelineno-5-16"></a>                <span class="n">xmin</span><span class="o">=</span><span class="n">annotation</span><span class="p">[</span><span class="s2">"bbox"</span><span class="p">][</span><span class="s2">"xmin"</span><span class="p">],</span>
</span><span id="__span-5-17"><a href="#__codelineno-5-17" id="__codelineno-5-17" name="__codelineno-5-17"></a>                <span class="n">xmax</span><span class="o">=</span><span class="n">annotation</span><span class="p">[</span><span class="s2">"bbox"</span><span class="p">][</span><span class="s2">"xmax"</span><span class="p">],</span>
</span><span id="__span-5-18"><a href="#__codelineno-5-18" id="__codelineno-5-18" name="__codelineno-5-18"></a>                <span class="n">ymin</span><span class="o">=</span><span class="n">annotation</span><span class="p">[</span><span class="s2">"bbox"</span><span class="p">][</span><span class="s2">"ymin"</span><span class="p">],</span>
</span><span id="__span-5-19"><a href="#__codelineno-5-19" id="__codelineno-5-19" name="__codelineno-5-19"></a>                <span class="n">ymax</span><span class="o">=</span><span class="n">annotation</span><span class="p">[</span><span class="s2">"bbox"</span><span class="p">][</span><span class="s2">"ymax"</span><span class="p">],</span>
</span><span id="__span-5-20"><a href="#__codelineno-5-20" id="__codelineno-5-20" name="__codelineno-5-20"></a>            <span class="p">)</span>
</span><span id="__span-5-21"><a href="#__codelineno-5-21" id="__codelineno-5-21" name="__codelineno-5-21"></a>        <span class="p">)</span>
</span><span id="__span-5-22"><a href="#__codelineno-5-22" id="__codelineno-5-22" name="__codelineno-5-22"></a>        <span class="k">for</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="n">element</span><span class="p">[</span><span class="s2">"annotations"</span><span class="p">]</span>
</span><span id="__span-5-23"><a href="#__codelineno-5-23" id="__codelineno-5-23" name="__codelineno-5-23"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="__span-5-24"><a href="#__codelineno-5-24" id="__codelineno-5-24" name="__codelineno-5-24"></a>    <span class="p">]</span>
</span><span id="__span-5-25"><a href="#__codelineno-5-25" id="__codelineno-5-25" name="__codelineno-5-25"></a>
</span><span id="__span-5-26"><a href="#__codelineno-5-26" id="__codelineno-5-26" name="__codelineno-5-26"></a>    <span class="c1"># create and return Prediction</span>
</span><span id="__span-5-27"><a href="#__codelineno-5-27" id="__codelineno-5-27" name="__codelineno-5-27"></a>    <span class="k">return</span> <span class="n">Prediction</span><span class="p">(</span>
</span><span id="__span-5-28"><a href="#__codelineno-5-28" id="__codelineno-5-28" name="__codelineno-5-28"></a>        <span class="n">datum</span><span class="o">=</span><span class="n">groundtruth</span><span class="o">.</span><span class="n">datum</span><span class="p">,</span>
</span><span id="__span-5-29"><a href="#__codelineno-5-29" id="__codelineno-5-29" name="__codelineno-5-29"></a>        <span class="n">annotations</span><span class="o">=</span><span class="n">annotations</span><span class="p">,</span>
</span><span id="__span-5-30"><a href="#__codelineno-5-30" id="__codelineno-5-30" name="__codelineno-5-30"></a>    <span class="p">)</span>
</span><span id="__span-5-31"><a href="#__codelineno-5-31" id="__codelineno-5-31" name="__codelineno-5-31"></a>
</span><span id="__span-5-32"><a href="#__codelineno-5-32" id="__codelineno-5-32" name="__codelineno-5-32"></a><span class="c1"># let's represent the simulated model output in a similar format to the ground truths:</span>
</span><span id="__span-5-33"><a href="#__codelineno-5-33" id="__codelineno-5-33" name="__codelineno-5-33"></a><span class="n">object_detections</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-5-34"><a href="#__codelineno-5-34" id="__codelineno-5-34" name="__codelineno-5-34"></a>    <span class="p">{</span><span class="s2">"path"</span><span class="p">:</span> <span class="s2">"a/b/c/img3.png"</span><span class="p">,</span> <span class="s2">"annotations"</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-5-35"><a href="#__codelineno-5-35" id="__codelineno-5-35" name="__codelineno-5-35"></a>        <span class="p">{</span><span class="s2">"labels"</span><span class="p">:</span> <span class="p">[{</span><span class="s2">"class_label"</span><span class="p">:</span> <span class="s2">"dog"</span><span class="p">,</span> <span class="s2">"score"</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">},</span> <span class="p">{</span><span class="s2">"class_label"</span><span class="p">:</span> <span class="s2">"cat"</span><span class="p">,</span> <span class="s2">"score"</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">},</span> <span class="p">{</span><span class="s2">"class_label"</span><span class="p">:</span> <span class="s2">"person"</span><span class="p">,</span> <span class="s2">"score"</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">}],</span> <span class="s2">"bbox"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"xmin"</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="s2">"ymin"</span><span class="p">:</span> <span class="mi">130</span><span class="p">,</span> <span class="s2">"xmax"</span><span class="p">:</span> <span class="mi">70</span><span class="p">,</span> <span class="s2">"ymax"</span><span class="p">:</span> <span class="mi">150</span><span class="p">}},</span>
</span><span id="__span-5-36"><a href="#__codelineno-5-36" id="__codelineno-5-36" name="__codelineno-5-36"></a>        <span class="p">{</span><span class="s2">"labels"</span><span class="p">:</span> <span class="p">[{</span><span class="s2">"class_label"</span><span class="p">:</span> <span class="s2">"dog"</span><span class="p">,</span> <span class="s2">"score"</span><span class="p">:</span> <span class="mf">0.05</span><span class="p">},</span> <span class="p">{</span><span class="s2">"class_label"</span><span class="p">:</span> <span class="s2">"cat"</span><span class="p">,</span> <span class="s2">"score"</span><span class="p">:</span> <span class="mf">0.05</span><span class="p">},</span> <span class="p">{</span><span class="s2">"class_label"</span><span class="p">:</span> <span class="s2">"person"</span><span class="p">,</span> <span class="s2">"score"</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">}],</span> <span class="s2">"bbox"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"xmin"</span><span class="p">:</span> <span class="mi">89</span><span class="p">,</span> <span class="s2">"ymin"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">"xmax"</span><span class="p">:</span> <span class="mi">97</span><span class="p">,</span> <span class="s2">"ymax"</span><span class="p">:</span> <span class="mi">110</span><span class="p">}}</span>
</span><span id="__span-5-37"><a href="#__codelineno-5-37" id="__codelineno-5-37" name="__codelineno-5-37"></a>    <span class="p">]},</span>
</span><span id="__span-5-38"><a href="#__codelineno-5-38" id="__codelineno-5-38" name="__codelineno-5-38"></a>    <span class="p">{</span><span class="s2">"path"</span><span class="p">:</span> <span class="s2">"a/b/c/img4.png"</span><span class="p">,</span> <span class="s2">"annotations"</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-5-39"><a href="#__codelineno-5-39" id="__codelineno-5-39" name="__codelineno-5-39"></a>        <span class="p">{</span><span class="s2">"labels"</span><span class="p">:</span> <span class="p">[{</span><span class="s2">"class_label"</span><span class="p">:</span> <span class="s2">"dog"</span><span class="p">,</span> <span class="s2">"score"</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">},</span> <span class="p">{</span><span class="s2">"class_label"</span><span class="p">:</span> <span class="s2">"cat"</span><span class="p">,</span> <span class="s2">"score"</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">},</span> <span class="p">{</span><span class="s2">"class_label"</span><span class="p">:</span> <span class="s2">"person"</span><span class="p">,</span> <span class="s2">"score"</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">}],</span> <span class="s2">"bbox"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"xmin"</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span> <span class="s2">"ymin"</span><span class="p">:</span> <span class="mi">220</span><span class="p">,</span> <span class="s2">"xmax"</span><span class="p">:</span> <span class="mi">530</span><span class="p">,</span> <span class="s2">"ymax"</span><span class="p">:</span> <span class="mi">260</span><span class="p">}}</span>
</span><span id="__span-5-40"><a href="#__codelineno-5-40" id="__codelineno-5-40" name="__codelineno-5-40"></a>    <span class="p">]},</span>
</span><span id="__span-5-41"><a href="#__codelineno-5-41" id="__codelineno-5-41" name="__codelineno-5-41"></a>    <span class="p">{</span><span class="s2">"path"</span><span class="p">:</span> <span class="s2">"a/b/c/img5.png"</span><span class="p">,</span> <span class="s2">"annotations"</span><span class="p">:</span> <span class="p">[]}</span>
</span><span id="__span-5-42"><a href="#__codelineno-5-42" id="__codelineno-5-42" name="__codelineno-5-42"></a><span class="p">]</span>
</span><span id="__span-5-43"><a href="#__codelineno-5-43" id="__codelineno-5-43" name="__codelineno-5-43"></a>
</span><span id="__span-5-44"><a href="#__codelineno-5-44" id="__codelineno-5-44" name="__codelineno-5-44"></a><span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">object_detections</span><span class="p">:</span>
</span><span id="__span-5-45"><a href="#__codelineno-5-45" id="__codelineno-5-45" name="__codelineno-5-45"></a>    <span class="c1"># create prediction</span>
</span><span id="__span-5-46"><a href="#__codelineno-5-46" id="__codelineno-5-46" name="__codelineno-5-46"></a>    <span class="n">prediction</span> <span class="o">=</span> <span class="n">create_prediction_from_object_detection_dict</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">datums_by_uid</span><span class="o">=</span><span class="n">datums_by_uid</span><span class="p">)</span>
</span><span id="__span-5-47"><a href="#__codelineno-5-47" id="__codelineno-5-47" name="__codelineno-5-47"></a>
</span><span id="__span-5-48"><a href="#__codelineno-5-48" id="__codelineno-5-48" name="__codelineno-5-48"></a>    <span class="c1"># add prediction to model</span>
</span><span id="__span-5-49"><a href="#__codelineno-5-49" id="__codelineno-5-49" name="__codelineno-5-49"></a>    <span class="n">model</span><span class="o">.</span><span class="n">add_prediction</span><span class="p">(</span><span class="n">prediction</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="run-your-evaluation-and-print-metrics">Run your evaluation and print metrics</h3>
<p>Now that both our <code>Dataset</code> and <code>Model</code> are finalized, we can evaluate how well our hypothetical model performed.</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="c1"># run evaluation</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="n">evaluation</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">evaluate_classification</span><span class="p">(</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>    <span class="n">dataset</span><span class="o">=</span><span class="n">dataset</span><span class="p">,</span>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>    <span class="n">filters</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>        <span class="n">Annotation</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">in_</span><span class="p">(</span>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>            <span class="p">[</span>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a>                <span class="n">Label</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">"class_label"</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">"dog"</span><span class="p">),</span>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a>                <span class="n">Label</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">"class_label"</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">"cat"</span><span class="p">),</span>
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a>            <span class="p">]</span>
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a>         <span class="c1"># with this filter, we're asking Valor to only evaluate how well our model predicted cats and dogs in our images.</span>
</span><span id="__span-6-11"><a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a>    <span class="p">]</span>
</span><span id="__span-6-12"><a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="p">)</span>
</span><span id="__span-6-13"><a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="n">evaluation</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span> <span class="c1"># wait for the job to finish</span>
</span><span id="__span-6-14"><a href="#__codelineno-6-14" id="__codelineno-6-14" name="__codelineno-6-14"></a>
</span><span id="__span-6-15"><a href="#__codelineno-6-15" id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="c1"># get the result of our evaluation</span>
</span><span id="__span-6-16"><a href="#__codelineno-6-16" id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="n">result</span> <span class="o">=</span> <span class="n">evaluation</span><span class="o">.</span><span class="n">get_result</span><span class="p">()</span>
</span><span id="__span-6-17"><a href="#__codelineno-6-17" id="__codelineno-6-17" name="__codelineno-6-17"></a>
</span><span id="__span-6-18"><a href="#__codelineno-6-18" id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="c1"># print our classification metrics</span>
</span><span id="__span-6-19"><a href="#__codelineno-6-19" id="__codelineno-6-19" name="__codelineno-6-19"></a><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">metrics</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="run-a-filtered-evaluation-and-print-metrics">Run a filtered evaluation and print metrics</h3>
<p>Valor offers more than just 1:1 evaluations; it allows the creation of metadata filters to stratify the dataset ground truths and model predictions. This enables the user to ask complex questions about their data.</p>
<p>With this in mind, let's pose the question: <em>"How well did the model perform on animal prediction?"</em></p>
<p>We can ask this question with the following evaluation statement:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="c1"># run evaluation</span>
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="n">animal_evaluation</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">evaluate_classification</span><span class="p">(</span>
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a>    <span class="n">dataset</span><span class="o">=</span><span class="n">dataset</span><span class="p">,</span>
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a>    <span class="n">filters</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a>        <span class="c1"># with this filter, we're asking Valor to only evaluate how well our model performed on predicting cats and dogs.</span>
</span><span id="__span-7-6"><a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a>        <span class="n">Annotation</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">in_</span><span class="p">(</span>
</span><span id="__span-7-7"><a href="#__codelineno-7-7" id="__codelineno-7-7" name="__codelineno-7-7"></a>            <span class="p">[</span>
</span><span id="__span-7-8"><a href="#__codelineno-7-8" id="__codelineno-7-8" name="__codelineno-7-8"></a>                <span class="n">Label</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">"class_label"</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">"dog"</span><span class="p">),</span>
</span><span id="__span-7-9"><a href="#__codelineno-7-9" id="__codelineno-7-9" name="__codelineno-7-9"></a>                <span class="n">Label</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">"class_label"</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">"cat"</span><span class="p">),</span>
</span><span id="__span-7-10"><a href="#__codelineno-7-10" id="__codelineno-7-10" name="__codelineno-7-10"></a>            <span class="p">]</span>
</span><span id="__span-7-11"><a href="#__codelineno-7-11" id="__codelineno-7-11" name="__codelineno-7-11"></a>        <span class="p">),</span>
</span><span id="__span-7-12"><a href="#__codelineno-7-12" id="__codelineno-7-12" name="__codelineno-7-12"></a>    <span class="p">]</span>
</span><span id="__span-7-13"><a href="#__codelineno-7-13" id="__codelineno-7-13" name="__codelineno-7-13"></a><span class="p">)</span>
</span><span id="__span-7-14"><a href="#__codelineno-7-14" id="__codelineno-7-14" name="__codelineno-7-14"></a>
</span><span id="__span-7-15"><a href="#__codelineno-7-15" id="__codelineno-7-15" name="__codelineno-7-15"></a><span class="n">animal_evaluation</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span> <span class="c1"># wait for the job to finish</span>
</span><span id="__span-7-16"><a href="#__codelineno-7-16" id="__codelineno-7-16" name="__codelineno-7-16"></a>
</span><span id="__span-7-17"><a href="#__codelineno-7-17" id="__codelineno-7-17" name="__codelineno-7-17"></a><span class="c1"># get the result of our evaluation</span>
</span><span id="__span-7-18"><a href="#__codelineno-7-18" id="__codelineno-7-18" name="__codelineno-7-18"></a><span class="n">result</span> <span class="o">=</span> <span class="n">animal_evaluation</span><span class="o">.</span><span class="n">get_result</span><span class="p">()</span>
</span><span id="__span-7-19"><a href="#__codelineno-7-19" id="__codelineno-7-19" name="__codelineno-7-19"></a>
</span><span id="__span-7-20"><a href="#__codelineno-7-20" id="__codelineno-7-20" name="__codelineno-7-20"></a><span class="c1"># print our classification metrics</span>
</span><span id="__span-7-21"><a href="#__codelineno-7-21" id="__codelineno-7-21" name="__codelineno-7-21"></a><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">metrics</span><span class="p">)</span>
</span></code></pre></div>
<p>For more examples, please see our <a href="https://github.com/Striveworks/valor/tree/main/sample_notebooks">sample notebooks</a>.</p>
<h2 id="next-steps">Next Steps</h2>
<p>For more examples, we'd recommend reviewing our <a href="https://github.com/Striveworks/valor/blob/main/examples/getting_started.ipynb">sample notebooks on GitHub</a>. For more detailed explanations of Valor's technical underpinnings, see our <a href="../technical_concepts/">technical concepts guide</a>.</p>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../assets/javascripts/bundle.3220b9d7.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>document$.subscribe(() => {
            window.update_swagger_ui_iframe_height = function (id) {
                var iFrameID = document.getElementById(id);
                if (iFrameID) {
                    full_height = (iFrameID.contentWindow.document.body.scrollHeight + 80) + "px";
                    iFrameID.height = full_height;
                    iFrameID.style.height = full_height;
                }
            }
        
            let iframe_id_list = []
            var iframes = document.getElementsByClassName("swagger-ui-iframe");
            for (var i = 0; i < iframes.length; i++) { 
                iframe_id_list.push(iframes[i].getAttribute("id"))
            }
        
            let ticking = true;
            
            document.addEventListener('scroll', function(e) {
                if (!ticking) {
                    window.requestAnimationFrame(()=> {
                        let half_vh = window.innerHeight/2;
                        for(var i = 0; i < iframe_id_list.length; i++) {
                            let element = document.getElementById(iframe_id_list[i])
                            if(element==null){
                                return
                            }
                            let diff = element.getBoundingClientRect().top
                            if(element.contentWindow.update_top_val){
                                element.contentWindow.update_top_val(half_vh - diff)
                            }
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        
            const dark_scheme_name = "slate"
            
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("swagger-ui-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === dark_scheme_name) {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script></body>
</html>